@{
    ViewBag.Title = "Candidates";
}

@section AddToTextCSS {
    .tabs a {
    outline: 0;
    }

    .classes-table {
    width: 100%;
    border: 1px solid black;
    }

    .classes-table > * {
    text-align: center;
    }

    /* Vertical tabs CSS */
    .ui-tabs.ui-tabs-vertical {
    padding: 0;
    width: 100%;
    }
    .ui-tabs.ui-tabs-vertical .ui-widget-header {
    border: none;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav {
    float: left;
    width: 15%;
    border-radius: 4px 0 0 4px;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav li {
    clear: left;
    width: 100%;
    margin: 0.2em 0;
    border-width: 1px 0 1px 1px;
    border-radius: 4px 0 0 4px;
    overflow: hidden;
    position: relative;
    right: -2px;
    z-index: 2;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav li a {
    display: block;
    width: 100%;
    padding: 0.6em 1em;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav li a:hover {
    cursor: pointer;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active {
    margin-bottom: 0.2em;
    padding-bottom: 0;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-nav li:last-child {
    margin-bottom: 10px;
    }
    .ui-tabs.ui-tabs-vertical .ui-tabs-panel {
    float: right;
    width: 75%;
    border-radius: 0;
    position: relative;
    left: -1px;
    }
}

<!--Basic Information Block-->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">Basic Candidate Information</h2>
        </div>
        <div class="row-fluid">
            <!-- First column, name etc-->
            <form id="biodata-form" class="form-horizontal">
                <div class="span4 panel-body">
                    <div class="form-group">
                        <label for="FName" class="control-label span5">First Name</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="FName" id="FName" value="@ViewBag.bioData.FName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="MName" class="control-label span5">Middle Name</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="MName" id="MName" value="@ViewBag.bioData.MName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="LName" class="control-label span5">Last Name</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="LName" id="LName" value="@ViewBag.bioData.LName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="SSN" class="control-label span5">SSN</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="SSN" id="SSN" value="@ViewBag.bioData.SSN" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Suffix" class="control-label span5">Suffix</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="Suffix" id="Suffix" value="@ViewBag.bioData.Suffix" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="FYG" class="control-label span5">Fiscal Year Group</label>
                        <div class="span7">
                            <input type="text" class="form-control span11" name="FYG" id="FYG" value="@ViewBag.bioData.FYG" />
                        </div>
                    </div>
                </div>
                <!-- Second column, date of birth, gender, etc-->
                <div class="span4 panel-body">
                    <div class="form-group">
                        <label for="DOB" class="control-label span4">Date of Birth</label>
                        <div class="span8">
                            <input type="text" class="date form-control span12" name="DOB" id="DOB" value="@ViewBag.bioData.DOB" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Sex" class="control-label span4">Sex</label>

                        <div class="span8">
                            <select id="Sex" name="Sex">
                                <option value="M" @if (ViewBag.bioData.Sex == Sex.M.ToString()) { <text> selected </text>           }>M</option>
                                <option value="F" @if (ViewBag.bioData.Sex == Sex.F.ToString()) { <text> selected </text>           }>F</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Ethnicity" class="control-label span4">Ethnicity</label>
                        <div class="span8">
                            <select id="Ethnicity" name="Ethnicity">
                                @foreach (var e in ViewBag.ethnicities)
                                {
                                    <option value="@e.EthnicityValue"
                                            @if (ViewBag.ethnicities[ViewBag.bioData.EthnicityID - 1].EthnicityValue == e.EthnicityValue) { <text> selected </text>        }>
                                        @e.EthnicityValue
                                    </option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Sources" class="control-label span4">Source</label>
                        <div class="span8">
                            <select id="Sources" name="Sources">
                                @foreach (var s in ViewBag.sources)
                                {
                                    <option value="@s.SourcesValue"
                                            @if (ViewBag.sources[ViewBag.bioData.SourcesID - 1].SourcesValue == s.SourcesValue) { <text> selected </text>        }>
                                        @s.SourcesValue
                                    </option>
                                }
                            </select>
                        </div>
                    </div>
                    <!-- TODO: only show subsource if source is NROTC(?) -->
                    <div class="form-group">
                        <label for="SubSources" class="control-label span4">SubSource</label>
                        <div class="span8">
                            <select id="SubSources" name="SubSources">
                                @foreach (var s in ViewBag.subsources)
                                {
                                    <option value="@s.SubSourcesValue"
                                            @if (ViewBag.subsourcePreload.SubSourcesValue == s.SubSourcesValue) { <text> selected </text>        }>
                                        @s.SubSourcesValue
                                    </option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Programs" class="control-label span4">Programs</label>
                        <div class="span8">
                            <select id="Programs" name="Programs" multiple>
                                @foreach (var p in ViewBag.programs)
                                {
                                    <option value="@p.ProgramValue">@p.ProgramValue</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Third column, ACT/SAT scores-->
                <div class="span4 panel-body">
                    <div class="form-group">
                        <label for="ACTM" class="control-label span4">ACT Math</label>
                        <div class="span8">
                            <input type="text" class="form-control span10" name="ACTM" id="ACTM" value="@ViewBag.bioData.ACTM" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="ACTV" class="control-label span4">ACT Verbal</label>
                        <div class="span8">
                            <input type="text" class="form-control span10" name="ACTV" id="ACTV" value="@ViewBag.bioData.ACTV" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="SATM" class="control-label span4">SAT Math</label>
                        <div class="span8">
                            <input type="text" class="form-control span10" name="SATM" id="SATM" value="@ViewBag.bioData.SATM" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="SATV" class="control-label span4">SAT Verbal</label>
                        <div class="span8">
                            <input type="text" class="form-control span10" name="SATV" id="SATV" value="@ViewBag.bioData.SATV" />
                        </div>
                    </div>
                </div>
            </form> <!-- End of biodata-form -->
        </div>
    </div>
</div>
<!-- School information block -->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">School Information</h2>
        </div>
        <div class="tabs" id="school-tabs">
            <ul>
                @{int i = 1;}}
                @foreach (var sa in ViewBag.schoolsAttended)
                {
                    <li><a href="#school-content-@i">@sa.School.SchoolValue</a></li>
                    i++;
                }
                <li id="add-school-tab"><a href="#add-school"><i class="fa fa-plus"></i></a></li>
            </ul>
            @{i = 1;}
            @foreach (var sa in ViewBag.schoolsAttended)
            {
                <div id="school-content-@i">
                    <form class="form-horizontal school-form">
                        <div class="row-fluid">
                            <!--School info block-->
                            <div class="span12 panel-body">
                                <div class="row-fluid">
                                    <div class="span5">
                                        <div class="form-group">
                                            <label for="YearStart" class="control-label span3">Start Year</label>
                                            <div class="span4">
                                                <input type="text" class="form-control span10" name="YearStart" id="YearStart" value="@sa.YearStart" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="YearEnd" class="control-label span3">End Year</label>
                                            <div class="span4">
                                                <input type="text" class="form-control span10" name="YearEnd" id="YearEnd" value="@sa.YearEnd" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="Graduated" class="control-label span3">Graduated?</label>
                                            <div class="span2">
                                                <select id="Graduated" name="Graduated" class="span12">
                                                    <option value="true">Yes</option>
                                                    <option value="false">No</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span7">
                                        <div class="form-group">
                                            <label for="MajorValue" class="control-label span3">Major</label>
                                            <div class="span4">
                                                <!--TODO: will be select2, because you can add a non-existing major-->
                                                <select id="MajorValue-@sa.SchoolsAttendedID" name="MajorValue" class="span10">
                                                    @foreach (var m in ViewBag.majors)
                                                    {
                                                        <option value="@m.MajorValue">@m.MajorValue</option>
                                                    }
                                                </select>
                                            </div>
                                            <label for="DegreeTypeValue" class="control-label span2">Degree</label>
                                            <div class="span2">
                                                <select id="DegreeTypeValue" name="DegreeTypeValue" class="span12">
                                                    @foreach (var d in ViewBag.degreeTypes)
                                                    {
                                                        <option value="@d.DegreeTypeValue">@d.DegreeTypeValue</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <label for="Comments" class="control-label span2">Comments</label>
                                <div class="span10">
                                    <textarea name="Comments" id="Comments" class="span12" rows="3" style="resize:vertical" placeholder="Comments regarding school attendance">@sa.Comments</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <input type="hidden" id="school-name" value="@sa.School.SchoolValue" />
                                <button type="button" class="btn-success pull-left btn-ignore generate-classes">Generate Classes Tab</button>
                                <button type="button" class="btn-danger pull-left btn-ignore remove-school">Remove</button>
                            </div>
                        </div>
                    </form>
                </div> <!--End of first tab-->
                i++;
            }
            <div id="add-school">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="SchoolValue" class="control-label span5">School Name</label>
                        <div class="span7">
                            <!--TODO: this will be a select2-->
                            <select id="SchoolValue" name="SchoolValue">
                                @foreach (var s in ViewBag.schools)
                                {
                                    <option value="@s.SchoolValue">@s.SchoolValue</option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="form-group text-center">
                        <button type="button" class="btn-success btn-ignore" id="add-school-button">Add School</button>
                    </div>
                </form>
            </div> <!--End of add school tab-->
        </div>
    </div>
</div>
<!--Class information block-->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">Class Information</h2>
        </div>
        <div class="tabs" id="class-tabs">
            <ul>
                @foreach (var sa in ViewBag.schoolsAttended)
                {
                    <li><a href="#class-content-@sa.SchoolsAttendedID">@sa.School.SchoolValue</a></li>
                }
            </ul>
            @foreach (var sa in ViewBag.schoolsAttended)
            {
                <div id="class-content-@sa.SchoolsAttendedID">
                    <div id="year-tabs" class="tabs-vertical">
                        <ul>
                            <!-- TODO: don't hardcode this-->
                            <li id="year-tab-1"><a href="#year-content-1">Year 1</a></li>
                        </ul>
                        <div id="year-content-1">
                            <form class="form-horizontal class-form">
                                <div class="row-fluid">
                                    <div class="span12 panel-body">
                                        @foreach (var ss in sa.SchoolStandings)
                                        {
                                            <div class="form-group">
                                                <label for="GPA" class="control-label span2">GPA</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="GPA" id="GPA" value="@ss.GPA" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="AOMVal" class="control-label span2">AOM</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="AOMVal" id="AOMVal" value="@ss.AOMVal" />
                                                </div>
                                                <label for="AOMTot" class="control-label span1">of</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="AOMTot" id="AOMTot" value="@ss.AOMTot" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="OOMVal" class="control-label span2">OOM</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="OOMVal" id="OOMVal" value="@ss.OOMVal" />
                                                </div>
                                                <label for="OOMTot" class="control-label span1">of</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="OOMTot" id="OOMTot" value="@ss.OOMTot" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="InMajorVal" class="control-label span2">Rank in Major</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="InMajorVal" id="InMajorVal" value="@ss.InMajorVal" />
                                                </div>
                                                <label for="InMajorTot" class="control-label span1">of</label>
                                                <div class="span3">
                                                    <input type="text" class="form-control span12" name="InMajorTot" id="InMajorTot" value="@ss.InMajorTot" />
                                                </div>
                                            </div>
                                        }
                                        <hr />
                                        <!--Classes table-->
                                        <table class="classes-table">
                                            <thead>
                                                <tr>
                                                    <th>Subject</th>
                                                    <th>Code</th>
                                                    <th>Name</th>
                                                    <th>Grade</th>
                                                    <th>Technical?</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var ca in sa.ClassesAttended)
                                                {
                                                    <tr>
                                                        <td>@ca.Classes.Subject</td>
                                                        <td>@ca.Classes.Code</td>
                                                        <td>@ca.Classes.Name</td>
                                                        <td>@ca.Grade</td>
                                                        <td>@ca.Classes.Technical</td>
                                                        <td class="text-center"><button class="btn-ignore btn-danger remove-class" type="button">Remove</button></td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <div class="form-inline">
                                            <label for="Subject" class="control-label span1">Subject</label>
                                            <div class="span2">
                                                <input type="text" class="form-control span11" name="Subject" id="Subject" />
                                            </div>
                                        </div>
                                        <div class="form-inline">
                                            <label for="Code" class="control-label span1">Code</label>
                                            <div class="span1">
                                                <input type="text" class="form-control span11" name="Code" id="Code" />
                                            </div>
                                        </div>
                                        <div class="form-inline">
                                            <label for="Name" class="control-label span1">Name</label>
                                            <div class="span2">
                                                <input type="text" class="form-control span12" name="Name" id="Name" />
                                            </div>
                                        </div>
                                        <div class="form-inline">
                                            <label for="Grade" class="control-label span1">Grade</label>
                                            <div class="span1">
                                                <input type="text" class="form-control span12" name="Grade" id="Grade" />
                                            </div>
                                        </div>
                                        <div class="form-inline">
                                            <label for="Technical" class="control-label span1">Tech?</label>
                                            <div class="span1">
                                                <select id="Technical" name="Technical" class="span11">
                                                    <option value="true">Yes</option>
                                                    <option value="false">No</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <button class="pull-right btn-ignore btn-success add-class" type="button"><i class="fa fa-plus"></i> Add Class</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>  <!--End of first tab-->
            }
        </div>
    </div>
</div>
<!--Duty history information block-->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">Duty History/Duty Station Information</h2>
        </div>
        @foreach (var dh in ViewBag.dutyHistories)
        {
            <div class="row-fluid">
                <div class="span12 panel-body">
                    <form class="form-horizontal" id="duty-history-form">
                        <div class="form-group">
                            <label for="Branch" class="control-label span2">Branch</label>
                            <div class="span4">
                                <select id="Branch" name="Branch" class="span10">
                                    <option value="AF">Air Force</option>
                                    <option value="Army">Army</option>
                                    <option value="Navy">Navy</option>
                                    <option value="USMC">USMC</option>
                                </select>
                            </div>
                            <label for="NUCD" class="control-label span2">Prior NUC</label>
                            <div class="span4">
                                <select id="NUCD" name="NUC" class="span10">
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Rating" class="control-label span2">Rating</label>
                            <div class="span4">
                                <input type="text" class="form-control span10" name="Rating" id="Rating" value="@dh.Rating" />
                            </div>
                            <label for="Rank" class="control-label span2">Rank</label>
                            <div class="span4">
                                <input type="text" class="form-control span10" name="Rank" id="Rank" value="@dh.Rank" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="tabs" id="duty-station-tabs">
                <ul>
                    @foreach (var ds in dh.DutyStations)
                    {
                        <li><a href="#duty-station-content-1">Duty Station</a></li>
                    }
                    <li><a href="#add-duty-station"><i class="fa fa-plus"></i></a></li>
                </ul>
                @foreach (var ds in dh.DutyStations)
                {
                    <div id="duty-station-content-@ds.DutyStationID">
                        <form class="form-horizontal duty-station-form">
                            <div class="row-fluid">
                                <div class="span12 panel-body">
                                    <div class="span6">
                                        <div class="form-group">
                                            <label for="GPA" class="control-label span2">GPA/Fitrep</label>
                                            <div class="span10">
                                                <input type="text" class="form-control span6" name="GPA" id="GPA" value="@ds.GPA" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="Duties" class="control-label span2">Duties</label>
                                            <div class="span10">
                                                <textarea name="Duties" id="Duties" class="span12" rows="3" style="resize:vertical" placeholder="Describe duties">@ds.Duties</textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="Notes" class="control-label span2">Notes</label>
                                            <div class="span10">
                                                <textarea name="Notes" id="Notes" class="span12" rows="3" style="resize:vertical" placeholder="Notes about performance">@ds.Notes</textarea>
                                            </div>
                                        </div>
                                    </div> <!--End of first column-->
                                    <div class="span6">
                                        <div class="form-group">
                                            <label for="ReportDate" class="control-label span3">Report Date</label>
                                            <div class="span9">
                                                <input type="text" class="date form-control" name="ReportDate" id="ReportDate" value="@ds.ReportDate" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="DepartDate" class="control-label span3">Depart Date</label>
                                            <div class="span9">
                                                <input type="text" class="form-control date" name="DepartDate" id="DepartDate" value="@ds.DepartDate" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="RankOverallVal" class="control-label span3">Overall Rank</label>
                                            <div class="span3">
                                                <input type="text" class="form-control span10" name="RankOverallVal" id="RankOverallVal" value="@ds.RankOverallVal" />
                                            </div>
                                            <label for="RankOverallTot" class="control-label span1">of</label>
                                            <div class="span3">
                                                <input type="text" class="form-control span10" name="RankOverallTot" id="RankOverallTot" value="@ds.RankOverallTot" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="RankInRateVal" class="control-label span3">Rank In Rate</label>
                                            <div class="span3">
                                                <input type="text" class="form-control span10" name="RankInRateVal" id="RankInRateVal" value="@ds.RankInRateVal" />
                                            </div>
                                            <label for="RankInRateTot" class="control-label span1">of</label>
                                            <div class="span3">
                                                <input type="text" class="form-control span10" name="RankInRateTot" id="RankInRateTot" value="@ds.RankInRateTot" />
                                            </div>
                                        </div>
                                    </div> <!--End of second column-->
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span12">
                                    <button type="button" class="btn-danger pull-left btn-ignore remove-duty-station">Remove</button>
                                </div>
                            </div>
                        </form>
                    </div> <!--End of Duty Station Tabs-->
                }

                <div id="add-duty-station">
                    <form class="form-horizontal">
                        <div class="form-group text-center">
                            <button type="button" class="btn-success btn-ignore" id="add-duty-station-button">Add Duty Station</button>
                        </div>
                    </form>
                </div> <!--End of add duty history tab-->
            </div> <!--End of all tabs-->
        }
    </div>
</div>
<!-- Waivers -->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">Waivers</h2>
        </div>
        <div class="tabs" id="waiver-tabs">
            <ul>
                @{i = 1;}
                @foreach (var w in ViewBag.waivers)
                {
                    <li><a href="#waiver-content-@i">Waiver</a></li>
                    i++;
                }
                <li><a href="#add-waiver"><i class="fa fa-plus"></i></a></li>
            </ul>
            @{i = 1;}
            @foreach (var w in ViewBag.waivers)
            {
                <div id="waiver-content-@i">
                    <form class="form-horizontal waiver-form">
                        <div class="form-group">
                            <label for="Type" class="control-label span2">Type</label>
                            <div class="span3">
                                <select class="form-control span12" name="Type" id="Type">
                                    <option value="ACADEMIC" @if (w.Type == WaiverType.Academic.ToString()) { <text> selected </text>        }>Academic</option>
                                    <option value="AGE" @if (w.Type == WaiverType.Age.ToString()) { <text> selected </text>        }>Age</option>
                                    <option value="DRUG" @if (w.Type == WaiverType.Drug.ToString()) { <text> selected </text>        }>Drug</option>
                                </select>
                            </div>
                            <label for="Date" class="control-label span2">Date</label>
                            <div class="span3">
                                <input class="form-control span12 date" type="text" name="Date" id="Date" value="@w.Date" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Comments" class="control-label span2">Comments</label>
                            <div class="span10">
                                <textarea class="form-control span12" name="Comments" id="Comments">@w.Comments</textarea>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <button type="button" class="btn-danger pull-left btn-ignore remove-waiver">Remove</button>
                            </div>
                        </div>
                    </form>
                </div>
i++;
            }
            <div id="add-waiver">
                <form class="form-horizontal">
                    <div class="form-group text-center">
                        <button type="button" class="btn-success btn-ignore" id="add-waiver-button">Add Waiver</button>
                    </div>
                </form>
            </div> <!--End of add waiver tab-->
        </div>
    </div>
</div>
<!-- Screens -->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">Screens</h2>
        </div>
        <div class="tabs" id="screen-tabs">
            <ul>
                @{i = 1;}
                @foreach (var s in ViewBag.screens)
                {
                    <li><a href="#screen-content-@i">Screen</a></li>
                    i++;
                }
                <li><a href="#add-screen"><i class="fa fa-plus"></i></a></li>
            </ul>
            @{i = 1;}
            @foreach (var s in ViewBag.screens)
            {
                <div id="screen-content-@i">
                    <form class="form-horizontal screen-form">
                        <div class="form-group">
                            <label for="Screener" class="control-label span2">Screener</label>
                            <div class="span2">
                                <input type="text" class="form-control span12" name="Screener" id="Screener" value="@s.Screener">
                            </div>
                            <label for="Location" class="control-label span2">Location</label>
                            <div class="span2">
                                <input type="text" class="form-control span12" name="Location" id="Location" value="@s.Location">
                            </div>
                            <label for="ScreenDate" class="control-label span2">Screen Date</label>
                            <div class="span2">
                                <input class="form-control span12 date" type="text" name="ScreenDate" id="ScreenDate" value="@s.ScreenDate" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="NRStatus" class="control-label span2">NR</label>
                            <div class="span2">
                                <select class="form-control span12" name="NRStatus" id="NRStatus">
                                    <option value="Blank" @if (s.NRStatus == ScreenStatus.Blank.ToString()) { <text> selected </text>       }>--None--</option>
                                    <option value="Yes" @if (s.NRStatus == ScreenStatus.Yes.ToString()) { <text> selected </text>       }>Yes</option>
                                    <option value="No" @if (s.NRStatus == ScreenStatus.No.ToString()) { <text> selected </text>       }>No</option>
                                    <option value="Pending" @if (s.NRStatus == ScreenStatus.Pending.ToString()) { <text> selected </text>       }>Pending</option>
                                    <option value="Forward" @if (s.NRStatus == ScreenStatus.Forward.ToString()) { <text> selected </text>       }>Forward</option>
                                    <option value="Maybe" @if (s.NRStatus == ScreenStatus.Maybe.ToString()) { <text> selected </text>       }>Maybe</option>
                                </select>
                            </div>
                            <label for="INSTStatus" class="control-label span2">INST</label>
                            <div class="span2">
                                <select class="form-control span12" name="INSTStatus" id="INSTStatus">
                                    <option value="Blank" @if (s.INSTStatus == ScreenStatus.Blank.ToString()) { <text> selected </text>        }>--None--</option>
                                    <option value="Yes" @if (s.INSTtatus == ScreenStatus.Yes.ToString()) { <text> selected </text>        }>Yes</option>
                                    <option value="No" @if (s.INSTtatus == ScreenStatus.No.ToString()) { <text> selected </text>        }>No</option>
                                    <option value="Pending" @if (s.INSTStatus == ScreenStatus.Pending.ToString()) { <text> selected </text>        }>Pending</option>
                                    <option value="Forward" @if (s.INSTStatus == ScreenStatus.Forward.ToString()) { <text> selected </text>        }>Forward</option>
                                    <option value="Maybe" @if (s.INSTStatus == ScreenStatus.Maybe.ToString()) { <text> selected </text>        }>Maybe</option>
                                </select>
                            </div>
                            <label for="NPSStatus" class="control-label span2">NPS</label>
                            <div class="span2">
                                <select class="form-control span12" name="NPSStatus" id="NPSStatus">
                                    <option value="Blank" @if (s.NPSStatus == ScreenStatus.Blank.ToString()) { <text> selected </text>        }>--None--</option>
                                    <option value="Yes" @if (s.NPSStatus == ScreenStatus.Yes.ToString()) { <text> selected </text>        }>Yes</option>
                                    <option value="No" @if (s.NPSStatus == ScreenStatus.No.ToString()) { <text> selected </text>        }>No</option>
                                    <option value="Pending" @if (s.NPSStatus == ScreenStatus.Pending.ToString()) { <text> selected </text>        }>Pending</option>
                                    <option value="Forward" @if (s.NPSStatus == ScreenStatus.Forward.ToString()) { <text> selected </text>        }>Forward</option>
                                    <option value="Maybe" @if (s.NPSStatus == ScreenStatus.Maybe.ToString()) { <text> selected </text>        }>Maybe</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Notes" class="control-label span2">Notes</label>
                            <div class="span10">
                                <textarea class="form-control span12" name="Notes" id="Notes">@s.Notes</textarea>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <button type="button" class="btn-danger pull-left btn-ignore remove-screen">Remove</button>
                            </div>
                        </div>
                    </form>
                </div>
i++;
            }
            <div id="add-screen">
                <form class="form-horizontal">
                    <div class="form-group text-center">
                        <button type="button" class="btn-success btn-ignore" id="add-screen-button">Add Screen</button>
                    </div>
                </form>
            </div> <!--End of add screen tab-->
        </div>
    </div>
</div>
<!-- RD -->
<div class="row-fluid">
    <div class="span10 offset1 panel panel-primary">
        <div class="panel-heading">
            <h2 class="panel-title">RDs</h2>
        </div>
        <div class="tabs" id="rd-tabs">
            <ul>
                @{i = 1;}
                @foreach (var rd in ViewBag.RDs)
                {
                    <li><a href="#rd-content-@i">RD</a></li>
                    i++;
                }
                <li><a href="#add-rd"><i class="fa fa-plus"></i></a></li>
            </ul>
            @{i = 1;}
            @foreach (var rd in ViewBag.RDs)
            {
                <div id="rd-content-@i">
                    <form class="form-horizontal rd-form">
                        <div class="form-group">
                            <label for="Type" class="control-label span2">Type</label>
                            <div class="span3">
                                <select class="form-control span12" name="Type" id="Type">
                                    <option value="DEVOL" @if (rd.Type == RDType.DEVOL.ToString()) { <text> selected </text>   }>DEVOL</option>
                                    <option value="RECLAMA" @if (rd.Type == RDType.RECLAMA.ToString()) { <text> selected </text>  }>RECLAMA</option>
                                </select>
                            </div>
                            <label for="Date" class="control-label span2">Date</label>
                            <div class="span3">
                                <input class="date form-control span12" type="text" name="Date" id="Date" value="@rd.Date" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Reason" class="control-label span2">Reason</label>
                            <div class="span10">
                                <textarea class="form-control span12" name="Reason" id="Reason">@rd.Reason</textarea>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <button type="button" class="btn-danger pull-left btn-ignore remove-rd">Remove</button>
                            </div>
                        </div>
                    </form>
                </div>
i++;
            }
            <div id="add-rd">
                <form class="form-horizontal">
                    <div class="form-group text-center">
                        <button type="button" class="btn-success btn-ignore" id="add-rd-button">Add RD</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Buttons at buttom of page -->
<div class="row-fluid">
    <div class="span12">
        <button type="button" id="create-candidate-button" class="btn-success span4 offset2 btn-ignore">Create</button>
        <button type="button" id="cancel-candidate-button" class="btn-danger span4 btn-ignore">Cancel</button>
    </div>
</div>
<div id="dialog-confirm" title="">
    <p></p>
</div>

@section AddToScripts {
    <script type="text/javascript">

        function showDialog(title, message, okOnly, okFunction) {
            $("#dialog-confirm > p").html(message);
            var buttons;
            if (okOnly) {
                buttons = {
                    Ok: function () {
                        okFunction();
                        $(this).dialog("close");
                    }
                }
            } else {
                buttons = {
                    Ok: function () {
                        okFunction();
                        $(this).dialog("close");
                    },
                    Close: function () {
                        $(this).dialog("close");
                    }
                }
            }
            
            $("#dialog-confirm").dialog({
                title: title,
                modal: true,
                buttons: buttons
            });
        }

        $(document).ready(function () {

            /** Regular form controls/operations **/

            var numSchools = 0;
            var numClasses = 0;
            var numDutyStations = 0;
            var numWaivers = 0;
            var numScreens = 0;
            var numRDs = 0;


            var schoolTabClone = $("#school-tabs > ul").children().first().clone().removeClass("hide");
            var schoolContentClone = $("#school-content-1").clone().removeClass("hide");
            var yearTabClone = $("#year-tab-1").clone();
            var yearContentClone = $("#year-content-1").clone();
            //Remove year tab and content after cloning
            /*
            $("#year-tab-1").remove();
            $("#year-content-1").remove();
            */
            var classTabClone = $("#class-tabs > ul").children().first().clone().removeClass("hide");
            var classContentClone = $("#class-content-1").clone().removeClass("hide");
            var dutyStationTabClone = $("#duty-station-tabs > ul").children().first().clone().removeClass("hide");
            var dutyStationContentClone = $("#duty-station-content-1").clone().removeClass("hide");
            var waiverTabClone = $("#waiver-tabs > ul").children().first().clone().removeClass("hide");
            var waiverContentClone = $("#waiver-content-1").clone().removeClass("hide");
            var screenTabClone = $("#screen-tabs > ul").children().first().clone().removeClass("hide");
            var screenContentClone = $("#screen-content-1").clone().removeClass("hide");
            var rdTabClone = $("#rd-tabs > ul").children().first().clone().removeClass("hide");
            var rdContentClone = $("#rd-content-1").clone().removeClass("hide");

            var schoolList = [];

            // Init horizontal and vertical tabs
            $(".tabs").tabs();
            $(".tabs-vertical").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
            $(".tabs-vertical li").removeClass("ui-corner-top").addClass("ui-corner-left");

            // Set datepickers
            $(".date").datepicker({
                changeYear: true,
                yearRange: "-90:+0"
            });

            /** Add functionalities **/

            $("#add-school-button").click(function () {
                var schoolName = $("#SchoolValue").val(); // Get school name from dropdown
                if (schoolList.indexOf(schoolName) != -1) {
                    showDialog("School Exists", "This school has already been added", true, function () { });
                    return;
                }
                numSchools++;
                schoolList.push(schoolName);
                if (numSchools == 1) {
                    // Just show hidden content
                    $("#school-tabs > ul").children().first().removeClass("hide");
                    // Put school name in link
                    $("#school-tabs > ul").children().first().find("a").html(schoolName);
                    // Put school name in hidden input
                    $("#school-content-1 #school-name").val(schoolName);
                    $("#school-content-1").removeClass("hide");
                    // Re-init tabs
                    $("#school-tabs").tabs("refresh");
                } else {
                    // Clone and add content
                    var li = $(schoolTabClone).clone();
                    $(li).children().first().attr("href", "#school-content-" + numSchools);
                    // Put school name in link
                    $(li).children().first().html(schoolName);
                    var content = $(schoolContentClone).clone();
                    $(content).attr("id", "school-content-" + numSchools);
                    // Put school name in hidden input
                    $(content).find("#school-name").val(schoolName);
                    $("#school-tabs > ul").prepend(li);
                    $("#school-tabs > ul").after(content);
                    // Re-init tabs
                    $("#school-tabs").tabs("refresh");
                }
            });

            $(document).on("click", ".generate-classes", function (e) {
                // Make sure YearStart and YearEnd are filled
                var YearStart = parseInt($(this).parent().parent().parent().find("#YearStart").val());
                var YearEnd = parseInt($(this).parent().parent().parent().find("#YearEnd").val());
                if (isNaN(YearStart) || isNaN(YearEnd) || (YearStart >= YearEnd)) {
                    showDialog("Only Numbers Allowed", "Please enter numbers for Year Start and Year End", true, function () { });
                    return;
                }
                numClasses++;
                var schoolName = $(this).prev().val();
                var newTabs;
                var content;
                if (numClasses == 1) {
                    // Just show hidden content
                    $("#class-tabs > ul").children().first().removeClass("hide");
                    // Set tab to school name
                    $("#class-tabs > ul").children().first().find("a").html(schoolName);
                    $("#class-content-1").removeClass("hide");
                    content = $("#class-content-1");
                    // Re-init tabs
                    $("#class-tabs").tabs("refresh");
                    newTabs = false;
                } else {
                    // Use clones
                    var li = $(classTabClone).clone();
                    content = $(classContentClone).clone();
                    // Set tab to school name
                    $(li).children().first().attr("href", "#class-content-" + numSchools);
                    $(li).children().first().html(schoolName);
                    $(content).attr("id", "class-content-" + numSchools);
                    $("#class-tabs > ul").prepend(li);
                    $("#class-tabs > ul").after(content);
                    // Re-init tabs
                    $("#class-tabs").tabs("refresh");
                    newTabs = true;
                }
                // Clone/create vertical tabs
                var numYears = YearEnd - YearStart;
                for (var i = 0; i < numYears; i++) {
                    // Clone year tab and content, append to 'content'
                    var yearTab = $(yearTabClone).clone();
                    var yearContent = $(yearContentClone).clone();
                    // Set year tab html and href
                    $(yearTab).find("a").html("Year " + (i + 1));
                    $(yearTab).find("a").attr("href", "#year-content-" + (i + 1));
                    // Set year content id
                    $(yearContent).attr("id", "year-content-" + (i + 1));
                    $(content).find("ul").append(yearTab); // Make consecutive downward
                    $(content).find("ul").after(yearContent);
                }
                // Init year tabs
                if (newTabs) {
                    // Set tabs vertical
                    $(content).find(".tabs-vertical").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
                    $(content).find(".tabs-vertical li").removeClass("ui-corner-top").addClass("ui-corner-left");
                } else {
                    // Just refresh
                    $(content).find("#year-tabs").tabs("refresh");
                }
                //TODO: disable generate button afterwards?
            });

            $(document).on("click", ".add-class", function (e) {
                var table = $(this).parent().parent().find(".classes-table");
                var name = $(this).parent().parent().find("#Name").val();
                var subject = $(this).parent().parent().find("#Subject").val().toUpperCase();
                var code = $(this).parent().parent().find("#Code").val();
                var tech = $(this).parent().parent().find("#Technical").val();
                var grade = $(this).parent().parent().find("#Grade").val();
                if (tech == "" || name == "" || subject == "" || code == "" || grade == "") {
                    showDialog("Empty Fields", "Please enter values in all of the fields", true, function () { });
                    return;
                }
                tech = tech == "true" ? "Yes" : "No";
                // Add to table
                $(table).find("tbody").append("" +
                "<tr>" +
                "<td>" + subject + "</td>" +
                "<td>" + code + "</td>" +
                "<td>" + name + "</td>" +
                "<td>" + grade + "</td>" +
                "<td>" + tech + "</td>" +
                "<td class='text-center'><button class='btn-ignore btn-danger remove-class' type='button'>Remove</button></td>" +
                "</tr>");
                // Clear out fields
                $(this).parent().parent().find("#Name").val("");
                $(this).parent().parent().find("#Subject").val("");
                $(this).parent().parent().find("#Code").val("");
                $(this).parent().parent().find("#Technical").val("true");
                $(this).parent().parent().find("#Grade").val("");
            });

            $("#add-duty-station-button").click(function () {
                numDutyStations++;
                if (numDutyStations == 1) {
                    // Just show hidden content
                    $("#duty-station-tabs > ul").children().first().removeClass("hide");
                    $("#duty-station-content-1").removeClass("hide");
                    // Re-init tabs
                    $("#duty-station-tabs").tabs("refresh");
                } else {
                    // Clone and add content
                    var li = $(dutyStationTabClone).clone();
                    $(li).children().first().attr("href", "#duty-station-content-" + numDutyStations);
                    var content = $(dutyStationContentClone).clone();
                    $(content).attr("id", "duty-station-content-" + numDutyStations);
                    $("#duty-station-tabs > ul").prepend(li);
                    $("#duty-station-tabs > ul").after(content);
                    // Re-init tabs
                    $("#duty-station-tabs").tabs("refresh");
                }
            });

            $("#add-waiver-button").click(function () {
                numWaivers++;
                if (numWaivers == 1) {
                    // Just show hidden content
                    $("#waiver-tabs > ul").children().first().removeClass("hide");
                    $("#waiver-content-1").removeClass("hide");
                    // Re-init tabs
                    $("#waiver-tabs").tabs("refresh");
                } else {
                    // Clone and add content
                    var li = $(waiverTabClone).clone();
                    $(li).children().first().attr("href", "#waiver-content-" + numWaivers);
                    var content = $(waiverContentClone).clone();
                    $(content).attr("id", "waiver-content-" + numWaivers);
                    $("#waiver-tabs > ul").prepend(li);
                    $("#waiver-tabs > ul").after(content);
                    // Re-init tabs
                    $("#waiver-tabs").tabs("refresh");
                }
            });

            $("#add-screen-button").click(function () {
                numScreens++;
                if (numScreens == 1) {
                    // Just show hidden content
                    $("#screen-tabs > ul").children().first().removeClass("hide");
                    $("#screen-content-1").removeClass("hide");
                    // Re-init tabs
                    $("#screen-tabs").tabs("refresh");
                } else {
                    // Clone and add content
                    var li = $(screenTabClone).clone();
                    $(li).children().first().attr("href", "#screen-content-" + numScreens);
                    var content = $(screenContentClone).clone();
                    $(content).attr("id", "screen-content-" + numScreens);
                    $("#screen-tabs > ul").prepend(li);
                    $("#screen-tabs > ul").after(content);
                    // Re-init tabs
                    $("#screen-tabs").tabs("refresh");
                }
            });

            $("#add-rd-button").click(function () {
                numRDs++;
                if (numRDs == 1) {
                    // Just show hidden content
                    $("#rd-tabs > ul").children().first().removeClass("hide");
                    $("#rd-content-1").removeClass("hide");
                    // Re-init tabs
                    $("#rd-tabs").tabs("refresh");
                } else {
                    // Clone and add content
                    var li = $(rdTabClone).clone();
                    $(li).children().first().attr("href", "#rd-content-" + numRDs);
                    var content = $(rdContentClone).clone();
                    $(content).attr("id", "rd-content-" + numRDs);
                    $("#rd-tabs > ul").prepend(li);
                    $("#rd-tabs > ul").after(content);
                    // Re-init tabs
                    $("#rd-tabs").tabs("refresh");
                }
            });

            /** Remove Functionalities **/

            $(document).on("click", ".remove-school", function (e) {
                // Ask for confirmation
                showDialog("Remove School?", "Are you sure you want to remove this school entry?", false, function () {
                    console.log("remove school");
                    // Remove the school tab and content
                    // Remove class tab and content
                });
            });

            $(document).on("click", ".remove-class", function (e) {
                var btn = $(this);
                var f = function () {
                    console.log("remove class");
                    $(btn).parent().parent().remove();
                }
                showDialog("Remove Class?", "Are you sure you want to remove this class entry?", false, f);
            });

            $(document).on("click", ".remove-duty-station", function (e) {
                // Remove duty station tab and content
                showDialog("Remove Duty Station?", "Are you sure you want to remove this duty station entry?", false, function () {
                    console.log("remove duty station");
                });
            });

            $(document).on("click", ".remove-waiver", function (e) {
                // Remove waiver tab and content
                showDialog("Remove Waiver?", "Are you sure you want to remove this waiver entry?", false, function () {
                    console.log("remove waiver");
                });
            });

            $(document).on("click", ".remove-screen", function (e) {
                // Remove screen tab and content
                showDialog("Remove Screen?", "Are you sure you want to remove this screen entry?", false, function () {
                    console.log("remove screen");
                });
            });

            $(document).on("click", ".remove-rd", function (e) {
                // Remove rd tab and content
                showDialog("Remove RD?", "Are you sure you want to remove this RD entry?", false, function () {
                    console.log("remove RD");
                });
            });

            // Create Candidate button click
            $("#create-candidate-button").click(function () {
                var biodataForm = $("#biodata-form").serialize();
                console.log(biodataForm);
                var schoolForm = $("#school-form-1").serialize();
                console.log(schoolForm);
                var classForm = $("#class-form-1").serialize();
                console.log(classForm);
                var dutyHistoryForm = $("#duty-history-form-1").serialize();
                console.log(dutyHistoryForm);
            });

            /** Edit values **/

            //Set the 'Select' values for School (i.e. Major, Graduated and Degree Type)
            var schoolJSON = [ @Html.Raw(Json.Encode(@ViewBag.schoolSelectValues))];
            var schoolSelectValues = JSON.parse(schoolJSON);

            for (var k = 0; k < schoolSelectValues.length; k++) {
                var obj = schoolSelectValues[k];
                $("#Graduated-" + obj.id + " option[value=" + obj.graduated + "]").attr('selected', 'selected');
                $("#DegreeTypeValue-" + obj.id + " option[value=" + obj.degreeType + "]").attr('selected', 'selected');
                $("#MajorValue-" + obj.id + " option[value=\"" + obj.major + "\"]").attr('selected', 'selected');

            }

            //Set the 'Select' values for DutyHistories (i.e. Branch and NUC)
            var dhJSON = [ @Html.Raw(Json.Encode(@ViewBag.dhSelectValues))];
            var selectValues = JSON.parse(dhJSON);

            for (var i = 0; i < selectValues.length; i++) {
                var obj = selectValues[i];
                $("#Branch-" + obj.id + " option[value=" + obj.branchValue + "]").attr('selected', 'selected');
            }

            //Set the 'Select' values for Programs
            var programJSON = [ @Html.Raw(Json.Encode(@ViewBag.programSelectValues))];
            var programSelectValues = JSON.parse(programJSON);
            for (var j = 0; j < programSelectValues.length; j++) {
                var obj = programSelectValues[j];
                $("#Programs option[value=" + obj.value + "]").attr('selected', 'selected');
            }

        });
    </script>
}
